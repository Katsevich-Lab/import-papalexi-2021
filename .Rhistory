.get_config_path("LOCAL_PAPALEXI_2019_DATA_DIR")
offsite_dir <- .get_config_path("LOCAL_PAPALEXI_2019_DATA_DIR")
offsite_dir
# create raw and processed subdirectories
raw_dir <- paste0(offsite_dir, "raw")
raw_dir
# create raw and processed subdirectories
raw_dir <- paste0(offsite_dir, "raw")
processed_dir <- paste0(offsite_dir, "processed")
raw_dir
processed_dir
dir.create(processed_dir)
raw_dir
# create raw and processed subdirectories
raw_dir <- paste0(offsite_dir, "raw")
processed_dir <- paste0(offsite_dir, "processed")
dir.create(raw_dir)
dir.create(processed_dir)
dir.create(raw_dir, recursive = TRUE)
dir.create(processed_dir, recursive = TRUE)
if (!dir.exists(raw_dir)) dir.create(raw_dir)
if(!dir.exists(processed_dir)) dir.create(processed_dir)
offsite_dir <- .get_config_path("LOCAL_PAPALEXI_2019_DATA_DIR")
geo_url <- "https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE153056"
filenames <- c("GSE153056_CITE_metadata.tsv.gz",
"GSE153056_ECCITE_Arrayed_metadata.tsv.gz",
"GSE153056_ECCITE_metadata.tsv.gz",
"GSE153056_RAW.tar")
offsite_dir <- .get_config_path("LOCAL_PAPALEXI_2019_DATA_DIR")
geo_url <- "https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE153056"
filenames <- c("GSE153056_CITE_metadata.tsv.gz",
"GSE153056_ECCITE_Arrayed_metadata.tsv.gz",
"GSE153056_ECCITE_metadata.tsv.gz",
"GSE153056_RAW.tar")
filenames
geo_url
sources <- paste0(geo_url, filenames)
sources
geo_url <- "https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE153056/"
filenames <- c("GSE153056_CITE_metadata.tsv.gz",
"GSE153056_ECCITE_Arrayed_metadata.tsv.gz",
"GSE153056_ECCITE_metadata.tsv.gz",
"GSE153056_RAW.tar")
sources <- paste0(geo_url, filenames)
sources
offsite_dir
raw_dir <- paste0(offsite_dir, "/raw_dir")
raw_dir
raw_dir <- paste0(offsite_dir, "raw_dir")
offsite_dir <- .get_config_path("LOCAL_PAPALEXI_2019_DATA_DIR")
raw_dir <- paste0(offsite_dir, "raw_dir")
geo_url <- "https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE153056/"
filenames <- c("GSE153056_CITE_metadata.tsv.gz",
"GSE153056_ECCITE_Arrayed_metadata.tsv.gz",
"GSE153056_ECCITE_metadata.tsv.gz",
"GSE153056_RAW.tar")
sources <- paste0(geo_url, filenames)
raw_dir
sources <- paste0(geo_url, filenames)
dests <- paste0(raw_dir, filenames)
sources
dests
offsite_dir <- .get_config_path("LOCAL_PAPALEXI_2019_DATA_DIR")
raw_dir <- paste0(offsite_dir, "raw_dir/")
geo_url <- "https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE153056/"
filenames <- c("GSE153056_CITE_metadata.tsv.gz",
"GSE153056_ECCITE_Arrayed_metadata.tsv.gz",
"GSE153056_ECCITE_metadata.tsv.gz",
"GSE153056_RAW.tar")
sources <- paste0(geo_url, filenames)
dests <- paste0(raw_dir, filenames)
sources
dests
offsite_dir <- .get_config_path("LOCAL_PAPALEXI_2019_DATA_DIR")
raw_dir <- paste0(offsite_dir, "raw_dir/")
geo_url <- "https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE153056/"
filenames <- c("GSE153056_CITE_metadata.tsv.gz",
"GSE153056_ECCITE_Arrayed_metadata.tsv.gz",
"GSE153056_ECCITE_metadata.tsv.gz",
"GSE153056_RAW.tar")
sources <- paste0(geo_url, filenames)
dests <- paste0(raw_dir, filenames)
sources
dests
sources
sources[1]
dests[1]
sources[1
]
# download files to raw directory
for (i in 1:length(filenames)) {
print("Downloading ", filenames[i])
download.file(url = sources[i],
destfile = dests[i])
}
i <- 1
sources[i]
?download.file
i
download.file(url = sources[i],
destfile = dests[i])
offsite_dir <- .get_config_path("LOCAL_PAPALEXI_2019_DATA_DIR")
raw_dir <- paste0(offsite_dir, "raw/")
geo_url <- "https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE153056/"
filenames <- c("GSE153056_CITE_metadata.tsv.gz",
"GSE153056_ECCITE_Arrayed_metadata.tsv.gz",
"GSE153056_ECCITE_metadata.tsv.gz",
"GSE153056_RAW.tar")
sources <- paste0(geo_url, filenames)
dests <- paste0(raw_dir, filenames)
# download files to raw directory
for (i in 1:length(filenames)) {
print("Downloading ", filenames[i])
download.file(url = sources[i],
destfile = dests[i])
}
print("Downloading ", filenames[i])
filenames[i]
print(paste0("Downloading ", filenames[i]))
download.file(url = sources[i],
destfile = dests[i])
filenames
# download files to raw directory
for (i in 1:length(filenames)) {
print(paste0("Downloading ", filenames[i]))
download.file(url = sources[i],
destfile = dests[i])
}
sources[i]
i
i <- 1
print(paste0("Downloading ", filenames[i]))
sources[i]
dests[i]
i
i <- 4
print(paste0("Downloading ", filenames[i]))
sources[i]
dests[i]
download.file(url = sources[i],
destfile = dests[i])
sources[i]
dests[i]
i
print(paste0("Downloading ", filenames[i]))
filenames[i]
sources[i]
dests[i]
offsite_dir <- .get_config_path("LOCAL_PAPALEXI_2019_DATA_DIR")
raw_dir <- paste0(offsite_dir, "raw/")
geo_url <- "https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE153056&format=file&file="
filenames <- c("GSE153056_CITE_metadata.tsv.gz",
"GSE153056_ECCITE_Arrayed_metadata.tsv.gz",
"GSE153056_ECCITE_metadata.tsv.gz",
"GSE153056_RAW.tar")
sources <- paste0(geo_url, filenames)
dests <- paste0(raw_dir, filenames)
i
i <- 1
print(paste0("Downloading ", filenames[i]))
download.file(url = sources[i],
destfile = dests[i])
i
i <-2
print(paste0("Downloading ", filenames[i]))
download.file(url = sources[i],
destfile = dests[i])
offsite_dir <- .get_config_path("LOCAL_PAPALEXI_2019_DATA_DIR")
raw_dir <- paste0(offsite_dir, "raw/")
geo_url <- "https://www.ncbi.nlm.nih.gov/geo/download/?acc=GSE153056&format=file&file="
filenames <- c("GSE153056_CITE_metadata.tsv.gz",
"GSE153056_ECCITE_Arrayed_metadata.tsv.gz",
"GSE153056_ECCITE_metadata.tsv.gz",
"GSE153056_RAW.tar")
sources <- paste0(geo_url, filenames)
dests <- paste0(raw_dir, filenames)
offsite_dir <- .get_config_path("LOCAL_PAPALEXI_2019_DATA_DIR")
raw_dir <- paste0(offsite_dir, "raw/")
geo_url <- "https://www.ncbi.nlm.nih.gov/geo/download/?acc=GSE153056&format=file&file="
filenames <- c("GSE153056_CITE_metadata.tsv.gz",
"GSE153056_ECCITE_Arrayed_metadata.tsv.gz",
"GSE153056_ECCITE_metadata.tsv.gz",
"GSE153056_RAW.tar")
sources <- paste0(geo_url, filenames)
dests <- paste0(raw_dir, filenames)
i
i <- 1
print(paste0("Downloading ", filenames[i]))
download.file(url = sources[i],
destfile = dests[i])
i <- 2
print(paste0("Downloading ", filenames[i]))
download.file(url = sources[i],
destfile = dests[i])
i <- 3
print(paste0("Downloading ", filenames[i]))
download.file(url = sources[i],
destfile = dests[i])
i <- 4
print(paste0("Downloading ", filenames[i]))
download.file(url = sources[i],
destfile = dests[i])
offsite_dir <- .get_config_path("LOCAL_PAPALEXI_2019_DATA_DIR")
raw_dir <- paste0(offsite_dir, "raw/")
geo_url <- "https://www.ncbi.nlm.nih.gov/geo/download/?acc=GSE153056&format=file&file="
filenames <- c("GSE153056_CITE_metadata.tsv.gz",
"GSE153056_ECCITE_Arrayed_metadata.tsv.gz",
"GSE153056_ECCITE_metadata.tsv.gz",
"GSE153056_RAW.tar")
filenames
sources <- paste0(geo_url, filenames)
dests <- paste0(raw_dir, filenames)
sources
dests
i
print(paste0("Downloading ", filenames[i]))
download.file(url = sources[i],
destfile = dests[i])
c
dests[i]
https://www.ncbi.nlm.nih.gov/geo/download/?acc=GSE153056&format=file
dests[i]
sources[i]
i
download.file(url = sources[i],
destfile = dests[i])
download.file(url = sources[i], destfile = dests[i])
"GSE153056_RAW.tar"
print(paste0("Downloading ", filenames[i]))
sources[i]
dests[i]
download.file(url = sources[i], destfile = dests[i])
sources
sources[i]
dests[i]
filenames[1]
sources[1]
filenames[4]
print(paste0("Downloading ", filenames[i]))
sources[i]
dests[i]
paste0("Downloading ", filenames[i])
sources[i]
dests[i]
download.file(rul = "https://www.ncbi.nlm.nih.gov/geo/download/?acc=GSE153056&format=file", destfile = dests[i])
download.file(url = "https://www.ncbi.nlm.nih.gov/geo/download/?acc=GSE153056&format=file", destfile = dests[i])
offsite_dir <- .get_config_path("LOCAL_PAPALEXI_2019_DATA_DIR")
raw_dir <- paste0(offsite_dir, "raw/")
geo_url <- "https://www.ncbi.nlm.nih.gov/geo/download/?acc=GSE153056&format=file&file="
filenames <- c("GSE153056_CITE_metadata.tsv.gz",
"GSE153056_ECCITE_Arrayed_metadata.tsv.gz",
"GSE153056_ECCITE_metadata.tsv.gz")
offsite_dir <- .get_config_path("LOCAL_PAPALEXI_2019_DATA_DIR")
raw_dir <- paste0(offsite_dir, "raw/")
geo_url <- "https://www.ncbi.nlm.nih.gov/geo/download/?acc=GSE153056&format=file&file="
filenames <- c("GSE153056_CITE_metadata.tsv.gz",
"GSE153056_ECCITE_Arrayed_metadata.tsv.gz",
"GSE153056_ECCITE_metadata.tsv.gz",
"GSE153056_RAW.tar")
sources <- paste0(geo_url, filenames)
dests <- paste0(raw_dir, filenames)
dests
sources
sources <- paste0(geo_url, filenames)
sources[4] <- "https://www.ncbi.nlm.nih.gov/geo/download/?acc=GSE153056&format=file"
sources
dests <- paste0(raw_dir, filenames)
i
offsite_dir <- .get_config_path("LOCAL_PAPALEXI_2019_DATA_DIR")
raw_dir <- paste0(offsite_dir, "raw/")
geo_url <- "https://www.ncbi.nlm.nih.gov/geo/download/?acc=GSE153056&format=file&file="
filenames <- c("GSE153056_CITE_metadata.tsv.gz",
"GSE153056_ECCITE_Arrayed_metadata.tsv.gz",
"GSE153056_ECCITE_metadata.tsv.gz",
"GSE153056_RAW.tar")
sources <- paste0(geo_url, filenames)
sources[4] <- "https://www.ncbi.nlm.nih.gov/geo/download/?acc=GSE153056&format=file"
dests <- paste0(raw_dir, filenames)
# download files to raw directory
for (i in 1:length(filenames)) {
print(paste0("Downloading ", filenames[i]))
download.file(url = sources[i], destfile = dests[i])
download.file(url = "https://www.ncbi.nlm.nih.gov/geo/download/?acc=GSE153056&format=file", destfile = dests[i])
}
dests[4]
dests
dests[4]
dests[4]
raw_dir
# unzip/untar
untar(dests[4], exdir = raw_dir)
# unzip/untar
untar(dests[4], exdir = raw_dir)
offsite_dir <- .get_config_path("LOCAL_PAPALEXI_2019_DATA_DIR")
# create raw and processed subdirectories
raw_dir <- paste0(offsite_dir, "raw/")
processed_dir <- paste0(offsite_dir, "processed/")
raw_dir
counts_dir <- paste0(raw_dir, "count")
counts_dir
if (!dir.exists(counts_dir)) dir.create(counts_dir)
offsite_dir <- .get_config_path("LOCAL_PAPALEXI_2019_DATA_DIR")
raw_dir <- paste0(offsite_dir, "raw/")
geo_url <- "https://www.ncbi.nlm.nih.gov/geo/download/?acc=GSE153056&format=file&file="
filenames <- c("GSE153056_CITE_metadata.tsv.gz",
"GSE153056_ECCITE_Arrayed_metadata.tsv.gz",
"GSE153056_ECCITE_metadata.tsv.gz",
"GSE153056_RAW.tar")
sources <- paste0(geo_url, filenames)
sources[4] <- "https://www.ncbi.nlm.nih.gov/geo/download/?acc=GSE153056&format=file"
dests <- paste0(raw_dir, filenames)
count_dir <- paste0(raw_dir, "count")
# unzip/untar
untar(dests[4], exdir = count_dir)
count_dir
list.files(count_dir)
R.utils::gunzip(list.files(count_dir))
list.files(count_dir)
count_dir
count_dir <- paste0(raw_dir, "count/")
R.utils::gunzip(paste0(count_dir, list.files(count_dir)))
fs_to_unzip <- paste0(count_dir, list.files(count_dir))
fs_to_unzip
for (f in fs_to_unzip) R.utils::gunzip(f)
dests[4]
file.remove(dests[4])
count_dir
raw_dir
# unzip the other data
raw_dir
# unzip the other data
list.files(raw_dir)
filenames[1:3]
filenames[1:3]
# unzip the other data
for (f in filenames[1:3]) {
R.utils::gunzip(f)
}
filenames
dests
# unzip the other data
for (f in dests[1:3]) {
R.utils::gunzip(f)
}
.get_config_path("LOCAL_PAPALEXI_2019_DATA_DIR")
offsite_dir <- .get_config_path("LOCAL_LISCOVITCH_2021_DATA_DIR")
